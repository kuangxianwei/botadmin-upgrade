<div class="layui-card">
    <div class="layui-card-body step-header"></div>
    <div class="layui-card-body step-content">
        <div>
            <div class="layui-form-item">
                <label class="layui-form-label" lay-tips="任务名称必须由中文、数字、字母、下划线组成 唯一">任务名称:</label>
                <div class="layui-input-block">
                    <input type="text" name="name" placeholder="必填" class="layui-input" required lay-verify="name">
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-row layui-col-space10">
                    <div class="layui-col-sm6">
                        <label class="layui-form-label" lay-tips="一行一条 如: https://www.nfivf.com">初始种子:</label>
                        <div class="layui-input-block">
                    <textarea name="seeds" class="layui-textarea" placeholder="必须是完整URL" required
                              lay-verify="seeds"></textarea>
                        </div>
                    </div>
                    <div class="layui-col-sm6">
                        <label class="layui-form-label">备注:</label>
                        <div class="layui-input-block">
                            <textarea name="note" class="layui-textarea" placeholder="可选"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-collapse" lay-accordion>
                    <div class="layui-colla-item">
                        <h2 class="layui-colla-title">翻译处理</h2>
                        <div class="layui-colla-content">
                            <div id="trans-items"></div>
                            <button class="layui-btn layui-btn-sm layui-btn-radius" lay-event="add-trans"
                                    style="margin: 10px 40px" lay-tips="新增一次翻译 则多翻译一次 例如：中文 -> 泰文 -> 英文 -> 中文 这样就翻译了3次">
                                <i class="layui-icon layui-icon-add-circle"></i>新增翻译引擎
                            </button>
                        </div>
                    </div>
                    <div class="layui-colla-item">
                        <h2 class="layui-colla-title">高级选项</h2>
                        <div class="layui-colla-content">
                            <div class="layui-form-item">
                                <div class="layui-inline" style="width: 48%">
                                    <label class="layui-form-label" lay-tips="格式 key1=value1; key2=value2; 或者一行一条">cookies:</label>
                                    <div class="layui-input-block">
                                    <textarea name="cookies" class="layui-textarea"
                                              placeholder="key1=value1; key2=value2"></textarea>
                                    </div>
                                </div>
                                <div class="layui-inline" style="width: 48%">
                                    <label class="layui-form-label" lay-tips="允许的域名一行一条">allowDomains:</label>
                                    <div class="layui-input-block">
                                    <textarea name="allow_domains" class="layui-textarea"
                                              placeholder="www.nfivf.com"></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="layui-form-item">
                                <div class="layui-inline" style="width: 31%">
                                    <label class="layui-form-label"
                                           lay-tips="采集间隔 单位为秒 10-20 随机最少10秒最多20秒">Delay:</label>
                                    <div class="layui-input-block">
                                        <input type="text" name="delay" class="layui-input" value="{{.obj.Delay}}">
                                    </div>
                                </div>
                                <div class="layui-inline" style="width: 31%">
                                    <label class="layui-form-label" lay-tips="指定字符集">字符集:</label>
                                    <div class="layui-input-block">
                                        <select name="charset">
                                            <option value="">自动</option>
                                            <option value="utf-8">UTF-8</option>
                                            <option value="gbk">GBK</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="layui-inline" style="width: 31%">
                                    <label class="layui-form-label" lay-tips="内容解码">解码:</label>
                                    <div class="layui-input-block">
                                        <select name="decode">
                                            <option>无</option>
                                            {{range .decodes -}}
                                                <option value="{{.}}">{{.}}</option>
                                            {{end -}}
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-col-md10 layui-col-md-offset1">
                <button class="layui-btn layui-btn-sm layui-btn-radius"
                        style="margin-bottom: -65px;margin-left: -35px"
                        lay-event="addListRule" lay-tips="点击无限添加列表规则">+
                </button>
                <div class="layui-tab layui-tab-card" lay-filter="step-list" lay-allowclose="true">
                    <ul class="layui-tab-title"></ul>
                    <div class="layui-tab-content"></div>
                </div>
                <div class="layui-card-body">
                    <button class="layui-hide" lay-submit lay-filter="testList"></button>
                    <button class="layui-btn" data-event="testList">测试采集</button>
                </div>
            </div>
        </div>
        <div class="layui-row">
            <div class="layui-col-md10 layui-col-md-offset1">
                <button class="layui-btn layui-btn-sm layui-btn-radius"
                        style="margin-bottom: -65px;margin-left: -35px"
                        lay-event="addDetailRule" lay-tips="点击无限添加规则">+
                </button>
                <div class="layui-tab layui-tab-card" lay-filter="step-detail" lay-allowclose="true">
                    <ul class="layui-tab-title"></ul>
                    <div class="layui-tab-content"></div>
                </div>
                <div class="layui-card-body">
                    <button class="layui-hide" lay-submit lay-filter="testDetail"></button>
                    <button class="layui-btn" data-event="testDetail">测试采集</button>
                </div>
            </div>
        </div>
        <div>
            <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">绑定网站:</label>
                    <div class="layui-input-block">
                        <select name="site_id" lay-filter="site_id" lay-search>
                            <option value="">搜索...</option>
                            {{range .sites -}}
                                <option value="{{.Id}}">{{.Vhost}}</option>
                            {{end -}}
                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">绑定栏目:</label>
                    <div class="layui-input-block" lay-filter="class_id">
                        <select name="class_id" lay-search>
                            <option value="">搜索...</option>
                        </select>
                    </div>
                </div>
            </div>
            <fieldset class="layui-elem-field">
                <legend>定时发布</legend>
                <div class="layui-form-item">
                    <label class="layui-form-label">启用</label>
                    <div class="layui-input-inline">
                        <input type="checkbox" name="cron_enabled" lay-skin="switch" lay-text="是|否"
                                {{if .obj.CronEnabled}} checked{{end}}>
                    </div>
                    <div class="layui-form-mid layui-word-aux">是否启用定时发布</div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">分:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="minute" value="{{.obj.Minute}}"
                               class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-word-aux">0-59 *-,</div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">时:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="hour" value="{{.obj.Hour}}"
                               class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-word-aux">0-23 *-,</div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">天:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="day" value="{{.obj.Day}}"
                               class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-word-aux">1-31 *-,</div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">月:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="month" value="{{.obj.Month}}"
                               class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-word-aux">1-12 *-,</div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">周:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="week" value="{{.obj.Week}}"
                               class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-word-aux">0-6 *-,</div>
                </div>
            </fieldset>
        </div>
    </div>
</div>
{{template "common" .}}